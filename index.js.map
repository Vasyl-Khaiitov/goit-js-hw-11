{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport axios from \"axios\";\n\nconst API_KEY = (axios.defaults.API_KEY = '49359087-343ead2b9467da8fb57304bcb');\nconst BASE_URL = (axios.defaults.baseURL = 'https://pixabay.com/api/');\n\nexport function requestServer(query) {\n\n    const options = {\n        params: {\n            key: API_KEY,\n            q: query.trim(),\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: 'true',\n        },\n    };\n\n    return axios\n        .get(BASE_URL, options)\n        .then(response => {\n            const hits = response?.data?.hits;\n            return hits;\n        })\n        .catch(error => {\n            console.error(\"API Error:\", error.message);\n\n            let errorMessage = 'An unexpected error occurred. Please try again later!';\n            if (error.response) {\n                errorMessage = `Server Error: ${error.response.data.message || error.message}`;\n            } else if (error.request) {\n                errorMessage = 'Network Error: Failed to reach the server. Please check your internet connection.';\n            }\n\n            iziToast.show({\n                title: \"⚠️\",\n                message: errorMessage,\n                color: 'red',\n                position: \"topRight\"\n            });\n        });\n\n}\n\n\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nlet lightbox = null;\n\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector('.loader');\n\nexport function clearGallery() {\n    gallery.innerHTML = '';\n}\n// Все в одній\nexport function updateGallery(hits) {\n    clearGallery();\n    markupPhoto(hits);\n}\n// Приховування\nexport function showLoader() {\n    loader.classList.remove('hidden');\n}\n// Показ\nexport function hideLoader() {\n    loader.classList.add('hidden');\n}\n\nexport function markupPhoto(hits = []) {\n   \n    const galleryMarkup = hits\n    .map(hit =>\n        `<li class=\"gallery-item\">\n        <a href=\"${hit.largeImageURL}\" class=\"gallery-item-link\">\n        <img class=\"gallery-img\" src=\"${hit.webformatURL}\" alt=\"${hit.tags}\" loading=\"lazy\" />\n        </a>\n        <div class=\"text-info\">\n        <p><b>Likes:</b>${hit.likes}</p>\n        <p><b>Views:</b>${hit.views}</p>\n        <p><b>Comments:</b>${hit.comments}</p>\n        <p><b>Downloads:</b>${hit.downloads}</p>\n        </div>\n        </li>`\n    )\n    .join(\"\");\n    gallery.insertAdjacentHTML(\"beforeend\", galleryMarkup)\n\n     \n            if (!lightbox) {\n                lightbox = new SimpleLightbox(\".gallery a\", {\n                    caption: true,\n                    captionType: \"attr\",\n                    captionsData: \"alt\",\n                    captionPosition: \"bottom\",\n                    captionDelay: 250\n                });\n            } else {\n                lightbox.refresh();\n            }\n\n}","\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { requestServer } from \"./js/pixabay-api\";\nimport { updateGallery, showLoader, hideLoader } from './js/render-functions';\n\n\nconst form = document.querySelector('.form');\nform.addEventListener('submit', onSubmit);\n\n\nexport function onSubmit(event) {\n    event.preventDefault();\n\n    const form = event.currentTarget;\n\n    const { searchText } = form.elements;\n    const correctValueText = searchText.value.trim();\n\n    if (!correctValueText) {\n        iziToast.show({\n            title: \"⛔\",\n            message: 'Please write a search query!',\n            color: 'yellow',\n            position: \"topRight\"\n        });\n        return;\n    }\n\n    showLoader();\n\n    requestServer(correctValueText)\n        .then(hits => {\n\n            if (!Array.isArray(hits)) {\n                console.error(\"Invalid response structure. Hits is not an array.\");\n                iziToast.show({\n                    title: \"⚠️\",\n                    message: 'Unexpected response format. Please try again later!',\n                    color: 'red',\n                    position: \"topRight\"\n                });\n                hideLoader();\n                return;\n            }\n\n\n            if (hits.length === 0) {\n                iziToast.show({\n                    title: \"❌\",\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                    color: 'red',\n                    position: \"topRight\"\n                });\n                hideLoader();\n                return;\n            }\n\n            updateGallery(hits);\n            form.reset();\n        })\n        .catch(error => {\n            console.error(\"Error:\", error.message);\n        })\n        .finally(() => {\n            hideLoader();\n        });\n}\n\n"],"names":["API_KEY","axios","BASE_URL","requestServer","query","options","response","_a","error","errorMessage","iziToast","lightbox","gallery","loader","clearGallery","updateGallery","hits","markupPhoto","showLoader","hideLoader","galleryMarkup","hit","SimpleLightbox","form","onSubmit","event","searchText","correctValueText"],"mappings":"+vBAKA,MAAMA,EAAWC,EAAM,SAAS,QAAU,qCACpCC,EAAYD,EAAM,SAAS,QAAU,2BAEpC,SAASE,EAAcC,EAAO,CAEjC,MAAMC,EAAU,CACZ,OAAQ,CACJ,IAAKL,EACL,EAAGI,EAAM,KAAM,EACf,WAAY,QACZ,YAAa,aACb,WAAY,MACf,CACT,EAEI,OAAOH,EACF,IAAIC,EAAUG,CAAO,EACrB,KAAKC,GAAY,OAEd,OADaC,EAAAD,GAAA,YAAAA,EAAU,OAAV,YAAAC,EAAgB,IAEzC,CAAS,EACA,MAAMC,GAAS,CACZ,QAAQ,MAAM,aAAcA,EAAM,OAAO,EAEzC,IAAIC,EAAe,wDACfD,EAAM,SACNC,EAAe,iBAAiBD,EAAM,SAAS,KAAK,SAAWA,EAAM,OAAO,GACrEA,EAAM,UACbC,EAAe,qFAGnBC,EAAS,KAAK,CACV,MAAO,KACP,QAASD,EACT,MAAO,MACP,SAAU,UAC1B,CAAa,CACb,CAAS,CAET,CCzCA,IAAIE,EAAW,KAEf,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EAExC,SAASC,GAAe,CAC3BF,EAAQ,UAAY,EACxB,CAEO,SAASG,EAAcC,EAAM,CAChCF,IACAG,EAAYD,CAAI,CACpB,CAEO,SAASE,GAAa,CACzBL,EAAO,UAAU,OAAO,QAAQ,CACpC,CAEO,SAASM,GAAa,CACzBN,EAAO,UAAU,IAAI,QAAQ,CACjC,CAEO,SAASI,EAAYD,EAAO,GAAI,CAEnC,MAAMI,EAAgBJ,EACrB,IAAIK,GACD;AAAA,mBACWA,EAAI,aAAa;AAAA,wCACIA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA;AAAA,0BAGhDA,EAAI,KAAK;AAAA,0BACTA,EAAI,KAAK;AAAA,6BACNA,EAAI,QAAQ;AAAA,8BACXA,EAAI,SAAS;AAAA;AAAA,cAGtC,EACA,KAAK,EAAE,EACRT,EAAQ,mBAAmB,YAAaQ,CAAa,EAGxCT,EASDA,EAAS,QAAO,EARhBA,EAAW,IAAIW,EAAe,aAAc,CACxC,QAAS,GACT,YAAa,OACb,aAAc,MACd,gBAAiB,SACjB,aAAc,GAClC,CAAiB,CAKjB,CCjDA,MAAMC,EAAO,SAAS,cAAc,OAAO,EAC3CA,EAAK,iBAAiB,SAAUC,CAAQ,EAGjC,SAASA,EAASC,EAAO,CAC5BA,EAAM,eAAc,EAEpB,MAAMF,EAAOE,EAAM,cAEb,CAAE,WAAAC,CAAU,EAAKH,EAAK,SACtBI,EAAmBD,EAAW,MAAM,KAAI,EAE9C,GAAI,CAACC,EAAkB,CACnBjB,EAAS,KAAK,CACV,MAAO,IACP,QAAS,+BACT,MAAO,SACP,SAAU,UACtB,CAAS,EACD,MACH,CAEDQ,IAEAf,EAAcwB,CAAgB,EACzB,KAAKX,GAAQ,CAEV,GAAI,CAAC,MAAM,QAAQA,CAAI,EAAG,CACtB,QAAQ,MAAM,mDAAmD,EACjEN,EAAS,KAAK,CACV,MAAO,KACP,QAAS,sDACT,MAAO,MACP,SAAU,UAC9B,CAAiB,EACDS,IACA,MACH,CAGD,GAAIH,EAAK,SAAW,EAAG,CACnBN,EAAS,KAAK,CACV,MAAO,IACP,QAAS,2EACT,MAAO,MACP,SAAU,UAC9B,CAAiB,EACDS,IACA,MACH,CAEDJ,EAAcC,CAAI,EAClBO,EAAK,MAAK,CACtB,CAAS,EACA,MAAMf,GAAS,CACZ,QAAQ,MAAM,SAAUA,EAAM,OAAO,CACjD,CAAS,EACA,QAAQ,IAAM,CACXW,GACZ,CAAS,CACT"}