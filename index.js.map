{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nlet lightbox = null;\n\nconst gallery = document.querySelector(\".gallery\");\n\nexport function markupPhoto(hits = []) {\n    gallery.innerHTML = \"\";\n    \n    const galleryMarkup = hits\n    .map(hit =>\n        `<li class=\"gallery-item\">\n        <a href=\"${hit.largeImageURL}\" class=\"gallery-item-link\">\n        <img class=\"gallery-img\" src=\"${hit.webformatURL}\" alt=\"${hit.tags}\" loading=\"lazy\" />\n        </a>\n        <div class=\"text-info\">\n        <p><b>Likes:</b>${hit.likes}</p>\n        <p><b>Views:</b>${hit.views}</p>\n        <p><b>Comments:</b>${hit.comments}</p>\n        <p><b>Downloads:</b>${hit.downloads}</p>\n        </div>\n        </li>`\n    )\n    .join(\"\");\n    gallery.insertAdjacentHTML(\"beforeend\", galleryMarkup)\n   \n\n    if (!lightbox) {\n        lightbox = new SimpleLightbox(\".gallery a\", {\n            caption: true,\n            captionType: \"attr\",\n            captionsData: \"alt\",\n            captionPosition: \"bottom\",\n            captionDelay: 250\n        });\n    } else {\n        lightbox.refresh();\n    }\n}","\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport axios from \"axios\";\nimport { markupPhoto } from \"./render-functions\";\n\nconst API_KEY = (axios.defaults.API_KEY = '49359087-343ead2b9467da8fb57304bcb');\nconst BASE_URL = (axios.defaults.baseURL = 'https://pixabay.com/api/');\n\n\n\n\nexport function requestServer(query) {\n\n    if (!query.trim()) {\n        console.error(\"Search query is empty!\");\n        return Promise.reject(\"Search query is empty.\");\n    }\n\n\n    const options = {\n        params: {\n            key: API_KEY,\n            q: query.trim(),\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: 'true',\n        },\n    };\n\n    return axios\n        .get(BASE_URL, options)\n        .then(response => {\n            const hits = response?.data?.hits;\n    \n            if (!Array.isArray(hits)) {\n                console.error(\"Invalid response structure. Hits is not an array.\");\n                iziToast.show({\n                    title: \"⚠️\",\n                    message: 'Unexpected response format. Please try again later!',\n                    color: 'red',\n                    position: \"topRight\"\n                });\n                return;\n            }\n\n            if (hits.length === 0) {\n                iziToast.show({\n                    title: \"❌\",\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                    color: 'red',\n                    position: \"topRight\"\n                });\n                return;\n            }\n            markupPhoto(hits);\n            return hits;\n        })\n        .catch(error => {\n            console.error(\"API Error:\", error.message);\n\n            let errorMessage = 'An unexpected error occurred. Please try again later!';\n            if (error.response) {\n                errorMessage = `Server Error: ${error.response.data.message || error.message}`;\n            } else if (error.request) {\n                errorMessage = 'Network Error: Failed to reach the server. Please check your internet connection.';\n            }\n\n            iziToast.show({\n                title: \"⚠️\",\n                message: errorMessage,\n                color: 'red',\n                position: \"topRight\"\n            });\n        });\n\n}\n\n\n","\nimport iziToast from \"izitoast\";\n\nimport { markupPhoto } from \"./js/render-functions\";\nimport { requestServer } from \"./js/pixabay-api\";\n\n\nconst form = document.querySelector('.form');\nconst loader = document.querySelector('.loader');\nform.addEventListener('submit', onSubmit);\n\nexport function onSubmit(event) {\n    event.preventDefault();\n\n    const form = event.currentTarget;\n    \n    const { searchText } = form.elements;\n    const correctValueText = searchText.value.trim();\n\n    if (!correctValueText) {\n        iziToast.show({\n            title: \"⛔\",\n            message: 'Please write a search query!',\n            color: 'yellow',\n            position: \"topRight\"\n        });\n        return;\n    } \n\n     loader.classList.remove(\"hidden\");\n\n    requestServer(correctValueText)\n        .then(hits => {\n        \n            if (hits.length === 0) {\n                iziToast.show({\n                title: \"❌\",\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                color: 'red',\n                position: \"topRight\"\n            });  \n                loader.classList.add(\"hidden\");\n                return;\n            }\n            \n            markupPhoto(hits);\n            form.reset();\n        })\n        .catch(error => {\n            console.error(\"Error:\", error.message);\n            iziToast.show({\n                title: \"⚠️\",\n                message: 'An unexpected error occurred. Please try again later!',\n                color: 'blue',\n                position: \"topRight\"\n            });\n        })\n        .finally(() => {\n            loader.classList.add(\"hidden\");\n        });\n}\n\n"],"names":["lightbox","gallery","markupPhoto","hits","galleryMarkup","hit","SimpleLightbox","API_KEY","axios","BASE_URL","requestServer","query","options","response","_a","iziToast","error","errorMessage","form","loader","onSubmit","event","searchText","correctValueText"],"mappings":"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"}